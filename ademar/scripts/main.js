var _=document.querySelector(".header__button"),b=document.querySelector(".header__nav"),Q=()=>{b.classList.add("header__nav--active"),_.classList.add("header__button--active"),document.addEventListener("click",D)},M=()=>{b.classList.remove("header__nav--active"),_.classList.remove("header__button--active"),document.removeEventListener("click",D)};function D(n){!b.contains(n.target)&&!_.contains(n.target)&&M()}var Z=()=>{b.classList.contains("header__nav--active")?M():Q()};_.addEventListener("click",Z);var k=document.querySelector(".scroll-up");function tt(){window.scrollY>window.innerHeight*1.5?k.classList.add("scroll-up--show"):k.classList.remove("scroll-up--show")}function et(){window.scrollTo({top:0})}window.addEventListener("scroll",tt);k.addEventListener("click",et);(function(){let n=document.querySelector(".header__contacts-button"),t=document.querySelector(".header__contacts-modal"),e=document.querySelector(".header__contacts-close");if(!n||!t||!e)return;let o=()=>{t.classList.add("header__contacts-modal--active"),document.body.style.overflow="hidden";let s=t.querySelector(".header__contacts-link");s&&setTimeout(()=>s.focus(),100)},c=()=>{t.classList.remove("header__contacts-modal--active"),document.body.style.overflow="",n.focus()};n.addEventListener("click",o),e.addEventListener("click",c),t.addEventListener("click",s=>{s.target===t&&c()}),document.addEventListener("keydown",s=>{s.key==="Escape"&&t.classList.contains("header__contacts-modal--active")&&c()}),t.addEventListener("keydown",s=>{if(s.key==="Tab"&&t.classList.contains("header__contacts-modal--active")){let l=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),r=l[0],u=l[l.length-1];s.shiftKey&&document.activeElement===r?(s.preventDefault(),u.focus()):!s.shiftKey&&document.activeElement===u&&(s.preventDefault(),r.focus())}})})();var nt=document.querySelectorAll('a[href^="#"]'),ot=n=>{n.preventDefault();let e=n.target.closest("a").getAttribute("href");if(e&&e!=="#"){let o=e.substring(1),c=document.getElementById(o);c&&c.scrollIntoView()}else window.scrollTo({top:0})};nt.forEach(n=>{n.addEventListener("click",ot)});var a=document.querySelector(".gallery-modal"),y=document.querySelector(".projects__list"),F=document.querySelector(".equipment__list");if(a&&(y||F)){let n=a.querySelector(".gallery-modal__image"),t=a.querySelector(".gallery-modal__description"),e=a.querySelector(".gallery-modal__close"),o=a.querySelector(".gallery-modal__nav--prev"),c=a.querySelector(".gallery-modal__nav--next"),s=a.querySelector(".gallery-modal__current"),l=a.querySelector(".gallery-modal__total"),r=0,u=[],E=y||F,C=y?".projects__item":".equipment__item",z=y?".projects__image":".equipment__image",G=y?".projects__description":".equipment__text",J=()=>{let i=E.querySelectorAll(C);return Array.from(i).map((d,h)=>{let v=d.querySelector(z),N=d.querySelector(G),Y=N?N.textContent:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442";return{src:v.src,alt:v.alt,description:Y,index:h}})},U=i=>{let d=window.innerWidth-document.documentElement.clientWidth;document.body.style.paddingRight=`${d}px`,document.body.style.overflow="hidden";let h=document.querySelector(".scroll-up");if(h){let v=parseFloat(getComputedStyle(h).right);h.style.right=`${v+d}px`}n.src=i.src,n.alt=i.alt,t.textContent=i.description,s.textContent=i.index+1,a.classList.add("gallery-modal--active")},x=()=>{a.classList.remove("gallery-modal--active"),document.body.style.overflow="",document.body.style.paddingRight="";let i=document.querySelector(".scroll-up");i&&(i.style.right="")},$=i=>{i<0?r=u.length-1:i>=u.length?r=0:r=i;let d=u[r];n.src=d.src,n.alt=d.alt,t.textContent=d.description,s.textContent=r+1},T=()=>{$(r-1)},A=()=>{$(r+1)};E.addEventListener("click",i=>{let d=i.target.closest(C);d&&(i.preventDefault(),u=J(),l.textContent=u.length,r=Array.from(E.querySelectorAll(C)).indexOf(d),U(u[r]))}),e&&e.addEventListener("click",x),o&&o.addEventListener("click",T),c&&c.addEventListener("click",A),a.addEventListener("click",i=>{i.target===a&&x()}),document.addEventListener("keydown",i=>{if(a.classList.contains("gallery-modal--active"))switch(i.key){case"Escape":x();break;case"ArrowLeft":T();break;case"ArrowRight":A();break}})}var I=document.getElementById("contactForm"),p=document.getElementById("contactFile"),S=document.getElementById("fileName"),H=document.getElementById("formSuccess"),q=document.getElementById("catalogContactForm"),f=document.getElementById("catalogContactFile"),L=document.getElementById("catalogFileName"),K=document.getElementById("catalogFormSuccess");p&&p.addEventListener("change",()=>{p.files.length>0?p.files.length===1?S.textContent=p.files[0].name:S.textContent=`\u0412\u044B\u0431\u0440\u0430\u043D\u043E \u0444\u0430\u0439\u043B\u043E\u0432: ${p.files.length}`:S.textContent="\u0424\u0430\u0439\u043B \u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D"});I&&I.addEventListener("submit",n=>{n.preventDefault(),setTimeout(()=>{H.classList.add("contact-form__success--visible"),I.reset(),S.textContent="\u0424\u0430\u0439\u043B \u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D",setTimeout(()=>{H.classList.remove("contact-form__success--visible")},5e3)},500)});var R=document.getElementById("contactPhone");R&&R.addEventListener("input",n=>{let t=n.target.value.replace(/\D/g,"");if(t.length>0){t[0]==="8"&&(t=`7${t.slice(1)}`);let e="+7";t.length>1&&(e=`${e} (${t.substring(1,4)}`),t.length>=5&&(e=`${e}) ${t.substring(4,7)}`),t.length>=8&&(e=`${e}-${t.substring(7,9)}`),t.length>=10&&(e=`${e}-${t.substring(9,11)}`),n.target.value=e}});f&&f.addEventListener("change",()=>{f.files.length>0?f.files.length===1?L.textContent=f.files[0].name:L.textContent=`\u0412\u044B\u0431\u0440\u0430\u043D\u043E \u0444\u0430\u0439\u043B\u043E\u0432: ${f.files.length}`:L.textContent="\u0424\u0430\u0439\u043B \u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D"});q&&q.addEventListener("submit",n=>{n.preventDefault(),setTimeout(()=>{K.classList.add("contact-form__success--visible"),q.reset(),L.textContent="\u0424\u0430\u0439\u043B \u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D",setTimeout(()=>{K.classList.remove("contact-form__success--visible")},5e3)},500)});var O=document.getElementById("catalogContactPhone");O&&O.addEventListener("input",n=>{let t=n.target.value.replace(/\D/g,"");if(t.length>0){t[0]==="8"&&(t=`7${t.slice(1)}`);let e="+7";t.length>1&&(e=`${e} (${t.substring(1,4)}`),t.length>=5&&(e=`${e}) ${t.substring(4,7)}`),t.length>=8&&(e=`${e}-${t.substring(7,9)}`),t.length>=10&&(e=`${e}-${t.substring(9,11)}`),n.target.value=e}});var j="ademar-cart-items";function m(){try{let n=localStorage.getItem(j);return n?JSON.parse(n):[]}catch{return[]}}function w(n){try{localStorage.setItem(j,JSON.stringify(n)),B()}catch{}}function st(n){let t=m();t.splice(n,1),w(t),X()}function B(){let t=m().length,e=document.querySelector(".header__cart-count");e&&(e.textContent=t);let o=document.querySelector(".cart-float"),c=document.querySelector(".cart-float__count");o&&c&&(c.textContent=t,t>0?o.classList.add("cart-float--show"):o.classList.remove("cart-float--show"))}function X(){let n=document.querySelector(".contact-form__product-list");if(!n)return;let t=m();if(n.innerHTML="",t.length===0){n.style.display="none";let e=document.querySelector(".contact-form__empty-message");e&&(e.style.display="block")}else{n.style.display="grid";let e=document.querySelector(".contact-form__empty-message");e&&(e.style.display="none"),t.forEach((o,c)=>{let s=document.createElement("li");s.className="contact-form__product-item";let l=document.createElement("h3");l.className="contact-form__product-name",l.textContent=o.name||o;let r=document.createElement("button");r.className="contact-form__product-remove",r.type="button",r.textContent="\u0423\u0434\u0430\u043B\u0438\u0442\u044C",r.addEventListener("click",()=>st(c)),s.appendChild(l),s.appendChild(r),n.appendChild(s)})}B()}function it(n){let t=m();return t.includes(n)?!1:(t.push(n),w(t),!0)}function rt(n){let t=m(),e=t.indexOf(n);return e>-1?(t.splice(e,1),w(t),!0):!1}function ct(n){return m().includes(n)}function V(){let n=document.querySelectorAll(".catalog__button--cart"),t=m();n.forEach(e=>{let o=e.dataset.name;t.includes(o)?(e.classList.add("in-cart"),e.textContent="\u0412 \u043A\u043E\u0440\u0437\u0438\u043D\u0435"):(e.classList.remove("in-cart"),e.textContent="\u0412 \u043A\u043E\u0440\u0437\u0438\u043D\u0443")})}function W(n){let t=n.target.closest(".catalog__button--cart");if(!t)return;let e=t.dataset.name;e&&(ct(e)?rt(e):it(e),V())}function at(){if(document.querySelector(".contact-form__product-list")||document.querySelector(".cart-float"))return;let n=document.createElement("a");n.className="cart-float",n.href="/cart.html";let t=document.createElement("span");t.className="visually-hidden",t.textContent="\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043A\u043E\u0440\u0437\u0438\u043D\u0443";let e=document.createElement("span");e.className="cart-float__count",e.textContent="0",n.appendChild(t),n.appendChild(e),document.body.appendChild(n)}document.addEventListener("DOMContentLoaded",()=>{at(),document.querySelector(".contact-form__product-list")&&X(),B(),V(),document.querySelectorAll(".catalog__list").forEach(e=>{e.addEventListener("click",W)}),document.querySelectorAll(".product-detail__button--primary.catalog__button--cart").forEach(e=>{e.addEventListener("click",W)})});var P=class{constructor(t,e={}){this.container=document.querySelector(t),this.container&&(this.options={sliderSelector:`${t}__slider`,listSelector:`${t}__list`,itemSelector:`${t}__item`,prevButtonSelector:`${t}__nav--prev`,nextButtonSelector:`${t}__nav--next`,dotsContainerSelector:`${t}__dots`,dotClass:`${t.replace(".","")}__dot`,dotActiveClass:`${t.replace(".","")}__dot--active`,itemsPerPage:{mobile:1,tablet:2,desktop:3},breakpoints:{tablet:768,desktop:1200},gap:{mobile:30,tablet:40},enableKeyboard:!0,enableTouch:!0,...e},this.slider=this.container.querySelector(this.options.sliderSelector),this.list=this.container.querySelector(this.options.listSelector),this.items=this.container.querySelectorAll(this.options.itemSelector),this.prevButton=this.container.querySelector(this.options.prevButtonSelector),this.nextButton=this.container.querySelector(this.options.nextButtonSelector),this.dotsContainer=this.container.querySelector(this.options.dotsContainerSelector),!(!this.slider||!this.list||this.items.length===0)&&(this.currentIndex=0,this.itemsPerPage=this.options.itemsPerPage.desktop,this.totalPages=0,this.init()))}init(){this.updateItemsPerPage(),this.setupEventListeners()}updateNavButtons(){this.prevButton&&this.nextButton&&(this.prevButton.disabled=this.currentIndex===0,this.nextButton.disabled=this.currentIndex>=this.totalPages-1,this.prevButton.style.opacity=this.currentIndex===0?"0.3":"1",this.nextButton.style.opacity=this.currentIndex>=this.totalPages-1?"0.3":"1",this.prevButton.style.cursor=this.currentIndex===0?"not-allowed":"pointer",this.nextButton.style.cursor=this.currentIndex>=this.totalPages-1?"not-allowed":"pointer")}updateDots(){if(!this.dotsContainer)return;this.dotsContainer.querySelectorAll(`.${this.options.dotClass}`).forEach((e,o)=>{o===this.currentIndex?e.classList.add(this.options.dotActiveClass):e.classList.remove(this.options.dotActiveClass)})}updateSlider(){let t=this.items[0].offsetWidth,e=window.innerWidth>=this.options.breakpoints.tablet?this.options.gap.tablet:this.options.gap.mobile,o=-(this.currentIndex*this.itemsPerPage*t+this.currentIndex*this.itemsPerPage*e);this.list.style.transform=`translateX(${o}px)`,this.updateNavButtons(),this.updateDots()}createDots(){if(this.dotsContainer){this.dotsContainer.innerHTML="";for(let t=0;t<this.totalPages;t++){let e=document.createElement("button");e.classList.add(this.options.dotClass),e.setAttribute("aria-label",`\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u043A \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0435 ${t+1}`),e.addEventListener("click",()=>{this.currentIndex=t,this.updateSlider()}),this.dotsContainer.appendChild(e)}this.updateDots()}}updateItemsPerPage(){let t=window.innerWidth;t<this.options.breakpoints.tablet?this.itemsPerPage=this.options.itemsPerPage.mobile:t<this.options.breakpoints.desktop?this.itemsPerPage=this.options.itemsPerPage.tablet:this.itemsPerPage=this.options.itemsPerPage.desktop,this.totalPages=Math.ceil(this.items.length/this.itemsPerPage),this.currentIndex>=this.totalPages&&(this.currentIndex=this.totalPages-1),this.updateSlider(),this.createDots()}nextSlide(){this.currentIndex<this.totalPages-1&&(this.currentIndex++,this.updateSlider())}prevSlide(){this.currentIndex>0&&(this.currentIndex--,this.updateSlider())}setupEventListeners(){if(this.nextButton&&this.nextButton.addEventListener("click",()=>this.nextSlide()),this.prevButton&&this.prevButton.addEventListener("click",()=>this.prevSlide()),this.options.enableTouch){let e=0,o=0,c=()=>{let l=e-o;Math.abs(l)>50&&(l>0?this.nextSlide():this.prevSlide())};this.slider.addEventListener("touchstart",s=>{e=s.changedTouches[0].screenX},{passive:!0}),this.slider.addEventListener("touchend",s=>{o=s.changedTouches[0].screenX,c()},{passive:!0})}this.options.enableKeyboard&&document.addEventListener("keydown",e=>{let o=this.slider.getBoundingClientRect();o.top<window.innerHeight&&o.bottom>0&&(e.key==="ArrowLeft"?this.prevSlide():e.key==="ArrowRight"&&this.nextSlide())});let t;window.addEventListener("resize",()=>{clearTimeout(t),t=setTimeout(()=>{this.updateItemsPerPage()},250)})}},g=P;new g(".reviews",{itemsPerPage:{mobile:1,tablet:2,desktop:3},breakpoints:{tablet:768,desktop:1200},gap:{mobile:30,tablet:40},enableKeyboard:!0,enableTouch:!0});new g(".projects",{itemsPerPage:{mobile:1,tablet:2,desktop:3},breakpoints:{tablet:768,desktop:1200},gap:{mobile:30,tablet:40},enableKeyboard:!0,enableTouch:!0});new g(".equipment",{itemsPerPage:{mobile:1,tablet:2,desktop:3},breakpoints:{tablet:768,desktop:1200},gap:{mobile:30,tablet:40},enableKeyboard:!0,enableTouch:!0});document.addEventListener("DOMContentLoaded",()=>{let n=document.querySelector(".contacts__map");n&&(n.addEventListener("click",()=>{n.classList.add("active")}),n.addEventListener("mouseleave",()=>{n.classList.remove("active")}))});
