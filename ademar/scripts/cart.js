var m = "ademar-cart-items"; function c() { try { let t = localStorage.getItem(m); return t ? JSON.parse(t) : [] } catch { return [] } } function i(t) { try { localStorage.setItem(m, JSON.stringify(t)), u() } catch { } } function _(t) { let n = c(); n.splice(t, 1), i(n), f() } function u() { let n = c().length, e = document.querySelector(".header__cart-count"); e && (e.textContent = n); let o = document.querySelector(".cart-float"), r = document.querySelector(".cart-float__count"); o && r && (r.textContent = n, n > 0 ? o.classList.add("cart-float--show") : o.classList.remove("cart-float--show")) } function f() { let t = document.querySelector(".contact-form__product-list"); if (!t) return; let n = c(); if (t.innerHTML = "", n.length === 0) { t.style.display = "none"; let e = document.querySelector(".contact-form__empty-message"); e && (e.style.display = "block") } else { t.style.display = "grid"; let e = document.querySelector(".contact-form__empty-message"); e && (e.style.display = "none"), n.forEach((o, r) => { let s = document.createElement("li"); s.className = "contact-form__product-item"; let l = document.createElement("h3"); l.className = "contact-form__product-name", l.textContent = o.name || o; let a = document.createElement("button"); a.className = "contact-form__product-remove", a.type = "button", a.textContent = "\u0423\u0434\u0430\u043B\u0438\u0442\u044C", a.addEventListener("click", () => _(r)), s.appendChild(l), s.appendChild(a), t.appendChild(s) }) } u() } function y(t) { let n = c(); return n.includes(t) ? !1 : (n.push(t), i(n), !0) } function C(t) { let n = c(), e = n.indexOf(t); return e > -1 ? (n.splice(e, 1), i(n), !0) : !1 } function h(t) { return c().includes(t) } function p() { let t = document.querySelectorAll(".catalog__button--cart"), n = c(); t.forEach(e => { let o = e.dataset.name; n.includes(o) ? (e.classList.add("in-cart"), e.textContent = "\u0412 \u043A\u043E\u0440\u0437\u0438\u043D\u0435") : (e.classList.remove("in-cart"), e.textContent = "\u0412 \u043A\u043E\u0440\u0437\u0438\u043D\u0443") }) } function d(t) { let n = t.target.closest(".catalog__button--cart"); if (!n) return; let e = n.dataset.name; e && (h(e) ? C(e) : y(e), p()) } function g() { if (document.querySelector(".contact-form__product-list") || document.querySelector(".cart-float")) return; let t = document.createElement("a"); t.className = "cart-float", t.href = "/ademar/cart.html"; let n = document.createElement("span"); n.className = "visually-hidden", n.textContent = "\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043A\u043E\u0440\u0437\u0438\u043D\u0443"; let e = document.createElement("span"); e.className = "cart-float__count", e.textContent = "0", t.appendChild(n), t.appendChild(e), document.body.appendChild(t) } document.addEventListener("DOMContentLoaded", () => { g(), document.querySelector(".contact-form__product-list") && f(), u(), p(), document.querySelectorAll(".catalog__list").forEach(e => { e.addEventListener("click", d) }), document.querySelectorAll(".product-detail__button--primary.catalog__button--cart").forEach(e => { e.addEventListener("click", d) }) }); export { y as addToCart, c as getCartItems, h as isInCart, i as saveCartItems, u as updateCartCount };
