var M=Object.defineProperty;var P=(n,e)=>()=>(n&&(e=n(n=0)),e);var O=(n,e)=>{for(var t in e)M(n,t,{get:e[t],enumerable:!0})};var $={};O($,{addToCart:()=>F,getCartItems:()=>v,isInCart:()=>_,saveCartItems:()=>E,updateCartCount:()=>h});function v(){try{let n=localStorage.getItem(B);return(n?JSON.parse(n):[]).map(t=>typeof t=="string"?{name:t,price:"\u043F\u043E \u0437\u0430\u043F\u0440\u043E\u0441\u0443",url:""}:t.url?t:{...t,url:""})}catch{return[]}}function E(n){try{localStorage.setItem(B,JSON.stringify(n)),h()}catch{}}function H(n){let e=v();e.splice(n,1),E(e),S()}function h(){let e=v().length,t=document.querySelector(".header__cart-count");t&&(t.textContent=e);let s=document.querySelector(".cart-float"),a=document.querySelector(".cart-float__count");s&&a&&(a.textContent=e,e>0?s.classList.add("cart-float--show"):s.classList.remove("cart-float--show"))}function S(){let n=document.querySelector(".contact-form__product-list");if(!n)return;let e=v();if(n.innerHTML="",e.length===0){n.style.display="none";let t=document.querySelector(".contact-form__empty-message");t&&(t.style.display="block")}else{n.style.display="grid";let t=document.querySelector(".contact-form__empty-message");t&&(t.style.display="none"),e.forEach((s,a)=>{let c=document.createElement("li");c.className="contact-form__product-item";let o=document.createElement("h3");if(o.className="contact-form__product-name",s.url){let L=document.createElement("a");L.href=s.url,L.textContent=s.name,L.className="contact-form__product-link",o.appendChild(L)}else o.textContent=s.name;let l=document.createElement("p");l.className="contact-form__product-price";let d=document.createElement("span");d.className="contact-form__product-price-label",d.textContent="\u0426\u0435\u043D\u0430:";let i=document.createElement("span");i.className="contact-form__product-price-value",i.textContent=s.price,l.appendChild(d),l.appendChild(i);let m=document.createElement("button");m.className="contact-form__product-remove",m.type="button",m.textContent="\u0423\u0434\u0430\u043B\u0438\u0442\u044C",m.addEventListener("click",()=>H(a)),c.appendChild(o),c.appendChild(l),c.appendChild(m),n.appendChild(c)})}h()}function F(n){let e=v();return e.some(s=>s.name===n.name)?!1:(e.push(n),E(e),!0)}function J(n){let e=v(),t=e.findIndex(s=>s.name===n);return t>-1?(e.splice(t,1),E(e),!0):!1}function _(n){return v().some(t=>t.name===n)}function N(n){let e=n.closest("article");if(!e)return null;let t=e.querySelector(".catalog__card-link");if(!t)return null;let s=e.querySelector(".catalog__price-value");return s?{name:t.textContent.trim(),price:s.textContent.trim(),url:t.getAttribute("href")||""}:null}function q(n){let e=n.closest("section");if(!e)return null;let t=e.querySelector(".product-hero__title");if(!t)return null;let s=e.querySelector(".product-hero__price-value");return s?{name:t.textContent.trim(),price:s.textContent.trim(),url:window.location.pathname}:null}function D(){document.querySelectorAll(".catalog__button--cart").forEach(e=>{let t=null;e.closest("article")?t=N(e):e.closest(".product-hero")&&(t=q(e)),t&&(_(t.name)?(e.classList.add("in-cart"),e.textContent="\u0412 \u043A\u043E\u0440\u0437\u0438\u043D\u0435"):(e.classList.remove("in-cart"),e.textContent=e.closest("article")?"\u0412 \u043A\u043E\u0440\u0437\u0438\u043D\u0443":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u043A\u043E\u0440\u0437\u0438\u043D\u0443"))})}function x(n){let e=n.target.closest(".catalog__button--cart");if(!e)return;let t=null;e.closest("article")?t=N(e):e.closest(".product-hero")&&(t=q(e)),t&&(_(t.name)?J(t.name):F(t),D())}var B,k=P(()=>{B="ademar-cart-items";document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".contact-form__product-list")&&S(),h(),D(),document.querySelectorAll(".catalog__list").forEach(t=>{t.addEventListener("click",x)});let e=document.querySelector(".product-hero");e&&e.addEventListener("click",x)})});var f=document.getElementById("contactForm"),p=document.getElementById("contactFile"),C=document.getElementById("fileList"),y=document.getElementById("formSuccess"),I=document.getElementById("catalogContactForm"),u=document.getElementById("catalogContactFile"),g=document.getElementById("catalogFileName"),w=document.getElementById("catalogFormSuccess"),r=[];function V(){let n=Math.floor(Date.now()/1e3);return String(n)}function b(){C&&(C.innerHTML="",r.forEach((n,e)=>{let t=document.createElement("li");t.className="contact-form__file-item";let s=document.createElement("span");s.textContent=n.name;let a=document.createElement("button");a.className="contact-form__file-remove",a.type="button",a.setAttribute("aria-label",`\u0423\u0434\u0430\u043B\u0438\u0442\u044C ${n.name}`),a.addEventListener("click",()=>z(e)),t.appendChild(s),t.appendChild(a),C.appendChild(t)}))}function z(n){r.splice(n,1),b()}p&&p.addEventListener("change",()=>{let e=Array.from(p.files);if(r.length+e.length>8){alert(`\u041C\u0430\u043A\u0441\u0438\u043C\u0443\u043C 8 \u0444\u0430\u0439\u043B\u043E\u0432. \u0412\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0435\u0449\u0451 ${8-r.length} \u0444\u0430\u0439\u043B(\u043E\u0432).`),p.value="";return}r=[...r,...e],p.value="",b()});f&&f.addEventListener("submit",async n=>{n.preventDefault();let{getCartItems:e}=await Promise.resolve().then(()=>(k(),$)),t=e(),s={customerInfo:{name:document.getElementById("contactName").value,company:document.getElementById("contactCompany").value||"\u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u0430",phone:document.getElementById("contactPhone").value,email:document.getElementById("contactEmail").value||"\u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D"},orderDetails:{message:document.getElementById("contactMessage").value,cartItems:t.map(l=>({productName:l.name,price:l.price}))},files:[],timestamp:new Date().toISOString(),formType:"order_request"},a=[];for(let l=0;l<r.length;l++)a.push({name:r[l].name,size:r[l].size,type:r[l].type});s.files=a;let c=new FormData;c.append("data",JSON.stringify(s));for(let l=0;l<r.length;l++)c.append("files",r[l]);let o=V();s.orderNumber=o,setTimeout(()=>{let l=document.getElementById("orderNumber");l&&(l.textContent=o),y.classList.add("contact-form__success--visible"),f.reset(),r=[],b(),f.querySelectorAll(".contact-form__input, .contact-form__textarea").forEach(m=>{m.classList.remove("valid","invalid")}),f.querySelectorAll(".contact-form__error").forEach(m=>{m.classList.remove("visible")})},500)});if(y){let n=y.querySelector(".contact-form__success-close");n&&n.addEventListener("click",()=>{y.classList.remove("contact-form__success--visible")})}function R(){let n=document.getElementById("contactName"),e=document.getElementById("contactCompany"),t=document.getElementById("contactPhone"),s=document.getElementById("contactEmail"),a=document.getElementById("contactMessage"),c=document.getElementById("nameError"),o=document.getElementById("phoneError"),l=document.getElementById("emailError"),d=document.getElementById("messageError");n&&c&&(n.addEventListener("blur",()=>{n.value.trim()?n.value.trim().length<2?(n.classList.add("invalid"),n.classList.remove("valid"),c.textContent="\u0418\u043C\u044F \u0434\u043E\u043B\u0436\u043D\u043E \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u043C\u0438\u043D\u0438\u043C\u0443\u043C 2 \u0441\u0438\u043C\u0432\u043E\u043B\u0430",c.classList.add("visible")):(n.classList.remove("invalid"),n.classList.add("valid"),c.classList.remove("visible")):(n.classList.add("invalid"),n.classList.remove("valid"),c.classList.add("visible"))}),n.addEventListener("input",()=>{let i=n.value.trim();n.classList.contains("invalid")&&(n.classList.remove("invalid"),c.classList.remove("visible")),i.length>=2?n.classList.add("valid"):n.classList.remove("valid")})),e&&(e.addEventListener("input",()=>{e.value.trim().length>0?e.classList.add("valid"):e.classList.remove("valid")}),e.addEventListener("blur",()=>{e.value.trim().length>0?e.classList.add("valid"):e.classList.remove("valid")})),t&&o&&(t.addEventListener("blur",()=>{let i=t.value.replace(/\D/g,"");i.length>0&&i.length<11?(t.classList.add("invalid"),t.classList.remove("valid"),o.classList.add("visible")):i.length===0?(t.classList.add("invalid"),t.classList.remove("valid"),o.textContent="\u0422\u0435\u043B\u0435\u0444\u043E\u043D \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u0435\u043D \u0434\u043B\u044F \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F",o.classList.add("visible")):i.length===11&&(t.classList.remove("invalid"),t.classList.add("valid"),o.classList.remove("visible"))}),t.addEventListener("input",()=>{let i=t.value.replace(/\D/g,"");t.classList.contains("invalid")&&(t.classList.remove("invalid"),o.classList.remove("visible")),i.length===11?t.classList.add("valid"):t.classList.remove("valid")})),s&&l&&(s.addEventListener("blur",()=>{s.value&&!s.validity.valid?(s.classList.add("invalid"),s.classList.remove("valid"),l.classList.add("visible")):s.value&&s.validity.valid?(s.classList.remove("invalid"),s.classList.add("valid"),l.classList.remove("visible")):(s.classList.remove("invalid"),s.classList.remove("valid"),l.classList.remove("visible"))}),s.addEventListener("input",()=>{s.classList.contains("invalid")&&(s.classList.remove("invalid"),l.classList.remove("visible")),s.value&&s.validity.valid?s.classList.add("valid"):s.classList.remove("valid")})),a&&d&&(a.addEventListener("blur",()=>{a.value.trim()?a.value.trim().length<10?(a.classList.add("invalid"),a.classList.remove("valid"),d.textContent="\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043E\u043F\u0438\u0448\u0438\u0442\u0435 \u0432\u0430\u0448 \u0437\u0430\u043A\u0430\u0437 \u043F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435 (\u043C\u0438\u043D\u0438\u043C\u0443\u043C 10 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432)",d.classList.add("visible")):(a.classList.remove("invalid"),a.classList.add("valid"),d.classList.remove("visible")):(a.classList.add("invalid"),a.classList.remove("valid"),d.textContent="\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0437\u0430\u043A\u0430\u0437\u0430 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E",d.classList.add("visible"))}),a.addEventListener("input",()=>{let i=a.value.trim();a.classList.contains("invalid")&&(a.classList.remove("invalid"),d.classList.remove("visible")),i.length>=10?a.classList.add("valid"):a.classList.remove("valid")}))}f&&R();var A=document.getElementById("contactPhone");A&&A.addEventListener("input",n=>{let e=n.target.value.replace(/\D/g,"").slice(0,11),t=e[0]||"";e.length>1&&(t+=` ${e.substring(1,4)}`),e.length>=5&&(t+=` ${e.substring(4,7)}`),e.length>=8&&(t+=` ${e.substring(7,9)}`),e.length>=10&&(t+=` ${e.substring(9,11)}`),n.target.value=t});u&&u.addEventListener("change",()=>{if(u.files.length>8){alert("\u041C\u0430\u043A\u0441\u0438\u043C\u0443\u043C 8 \u0444\u0430\u0439\u043B\u043E\u0432. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043C\u0435\u043D\u044C\u0448\u0435 \u0444\u0430\u0439\u043B\u043E\u0432."),u.value="",g.textContent="\u0424\u0430\u0439\u043B\u044B \u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D\u044B";return}u.files.length>0?u.files.length===1?g.textContent=u.files[0].name:g.textContent=`\u0412\u044B\u0431\u0440\u0430\u043D\u043E \u0444\u0430\u0439\u043B\u043E\u0432: ${u.files.length}`:g.textContent="\u0424\u0430\u0439\u043B\u044B \u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D\u044B"});I&&I.addEventListener("submit",n=>{n.preventDefault(),setTimeout(()=>{w.classList.add("contact-form__success--visible"),I.reset(),g.textContent="\u0424\u0430\u0439\u043B\u044B \u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D\u044B",setTimeout(()=>{w.classList.remove("contact-form__success--visible")},5e3)},500)});var T=document.getElementById("catalogContactPhone");T&&T.addEventListener("input",n=>{let e=n.target.value.replace(/\D/g,"").slice(0,11),t=e[0]||"";e.length>1&&(t+=` ${e.substring(1,4)}`),e.length>=5&&(t+=` ${e.substring(4,7)}`),e.length>=8&&(t+=` ${e.substring(7,9)}`),e.length>=10&&(t+=` ${e.substring(9,11)}`),n.target.value=t});
